# jwt和cookie和session

## cookie简单介绍

cookie是浏览器实现的一种存储功能，它用于存储服务器生成并返回的文本数据，Cookie 通常用于保存用户的会话状态、偏好设置、登录信息等。一般cookie是搭配session使用的。

## session

### 详解

Session是服务器端保存客户端状态的机制。用户登录后，服务器会生成并保存session为用户分配一个sessionId，用户发送其他请求时，携带sessionId，服务器通过sessionId查找session进行认证，这样就**在多个页面请求之间保持了用户的状态和进行数据共享**。

可是session有一个缺陷，**如果web服务部署了多台机器，做了负载均衡，那么下一个操作请求到了另一台服务器的时候session会丢失。**

![img](D:\E\学习\Go\笔记\面试\面试重点\assets\96527705e6c04191b66e1e3cca512627.png)

### 面试题

#### cookie和session的区别

保存位置：

大小限制：cookie存储大小受限，最多存储大小为4kb。

数据类型：cookie只支持存储字符串数据；session可存储任意数据

生命周期：

跨域存储：

## jwt

### 简介

jwt是通过**数字签名**的方式对**json格式的数据**加密，在不同服务之间安全的传输信息的一种技术

### jwt结构

- 头部(header)：主要声明令牌的类型和加密算法
- 负载(payload)：存储具体的信息或声明（claims），比如用户 ID、过期时间等。
- 签名(signature)：通过将头部和载荷用密钥加密生成，用于验证jwt令牌的完整性

### 工作流程

用户登录校验成功后，服务端根据用户信息生成token返回客户端

客户端会将token存储在本地，之后每次请求都携带这个token授权码

服务器通过验证JWT的签名和有效性来识别用户身份，验证了这个token的有效性后，才会执行具体的业务逻辑

![img](D:\E\学习\Go\笔记\面试\面试重点\assets\11f6b05af50349dcba7601f170e478ca.png)

### 面试题

#### jwt与session的区别，优缺点

区别主要是存储位置引起的

- **安全性**：session中的信息保存在服务器，数据安全性较高。
- **扩展性**：因为服务器不需要存储token，jwt适合分布式、微服务的架构、扩展性更好。session要在分布式系统中使用，就要在多台机器中进行同步，扩展性差。
- **性能开销**：session信息需要保存在服务器，当用户多的情况下，服务器性能会大大降低。
- **会话管理（有无状态）**：session相比于jwt方便进行管理，比如用户登录和主动注销，只需要添加删除对应的session就可以，这样管理起来很方便。而**jwt是无状态的，不能够主动销毁令牌**，想要实现退出登录，就要维护jwt的状态，牺牲了jwt无状态的特性。



session:

优：**安全，有状态(会话管理方便)**。缺：**服务器性能低，分布式扩展性**

jwt:

优：**适合分布式系统**。缺：**无状态**

# md5加密

https://blog.csdn.net/weixin_52115456/article/details/131827223
